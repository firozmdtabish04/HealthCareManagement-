<app-header></app-header>

<div class="message" id="messagecard">
  <b>{{ message }}</b>
</div>

<div class="container" id="appointmentform">
  <h2 class="textual" style="color: darkgreen">
    <i class="fa fa-calendar"></i>
    <b>Book Your New Appointments</b>
  </h2>

  <small style="color: maroon; font-weight: bold; margin-left: 15%">
    Please check doctor's availability before booking your respective slot
  </small>

  <form #bookappointmentform="ngForm" (ngSubmit)="bookAppointment()">
    <!-- Patient Name -->
    <div class="form-group">
      <label for="patientname">
        Patient Name :
        <b class="text-danger">*</b>
        <small style="color: gray; font-size: 12px">
          (please enter full name of the patient with initial)
        </small>
      </label>

      <input
        type="text"
        id="patientname"
        class="form-control"
        placeholder="enter your name"
        name="patientname"
        [(ngModel)]="appointment.patientname"
        required
        #patientname="ngModel"
        [class.is-invalid]="patientname.invalid && patientname.touched"
      />

      <small
        class="text-danger"
        [class.d-none]="patientname.valid || patientname.untouched"
      >
        <b>required field</b>
      </small>
    </div>

    <!-- Email -->
    <div class="form-group">
      <label for="patientemail">
        Email address :
        <b class="text-danger">*</b>
      </label>

      <input
        type="email"
        id="patientemail"
        class="form-control"
        placeholder="enter email address"
        name="patientemail"
        [(ngModel)]="appointment.email"
        required
        pattern="^[a-zA-Z0-9+_.-]+@[a-zA-Z0-9.-]+$"
        #patientemail="ngModel"
        [class.is-invalid]="patientemail.invalid && patientemail.touched"
      />

      <div *ngIf="patientemail.invalid && patientemail.touched">
        <small class="text-danger" *ngIf="patientemail.errors?.required">
          required field
        </small>

        <small class="text-danger" *ngIf="patientemail.errors?.pattern">
          Invalid email Id
        </small>
      </div>
    </div>

    <!-- Doctor -->
    <div class="form-group">
      <label for="doctor">
        Choose Doctor :
        <b class="text-danger">*</b>
      </label>

      <select
        id="doctor"
        class="form-control"
        name="doctor"
        [(ngModel)]="appointment.doctorname"
        #doctor="ngModel"
      >
        <option value="">Select doctor</option>

        <option *ngFor="let doctor of doctors | async" [value]="doctor">
          {{ doctor }}
        </option>
      </select>
    </div>

    <!-- Specialization -->
    <div class="form-group">
      <label for="specialization">
        Specialization :
        <b class="text-danger">*</b>
      </label>

      <select
        id="specialization"
        class="form-control"
        name="specialization"
        [(ngModel)]="appointment.specialization"
        #specialization="ngModel"
      >
        <option value="">Select speciality</option>

        <option
          *ngFor="let speciality of specializations | async"
          [value]="speciality"
        >
          {{ speciality }}
        </option>
      </select>
    </div>

    <!-- Date -->
    <div class="form-group">
      <label for="date">
        Appointment Date :
        <b class="text-danger">*</b>
      </label>

      <input
        type="date"
        id="date"
        class="form-control"
        name="date"
        [(ngModel)]="appointment.date"
        required
        #date="ngModel"
        [class.is-invalid]="date.invalid && date.touched"
      />

      <small class="text-danger" [class.d-none]="date.valid || date.untouched">
        required field
      </small>
    </div>

    <!-- Slot -->
    <div class="form-group">
      <label for="slot">
        Appointment Slot :
        <b class="text-danger">*</b>
      </label>

      <select
        id="slot"
        class="form-control"
        name="slot"
        [(ngModel)]="appointment.slot"
        #slot="ngModel"
      >
        <option value="AM slot">AM slot</option>
        <option value="Noon slot">Noon slot</option>
        <option value="PM slot">PM slot</option>
      </select>
    </div>

    <!-- Age -->
    <div class="form-group">
      <label for="age">
        Patient Age :
        <b class="text-danger">*</b>
      </label>

      <input
        type="text"
        id="age"
        class="form-control"
        name="age"
        [(ngModel)]="appointment.age"
        required
        #age="ngModel"
        [class.is-invalid]="age.invalid && age.touched"
      />

      <small class="text-danger" [class.d-none]="age.valid || age.untouched">
        required field
      </small>
    </div>

    <!-- Gender -->
    <div class="form-group">
      <label for="gender">
        Patient Gender :
        <b class="text-danger">*</b>
      </label>

      <select
        id="gender"
        class="form-control"
        name="gender"
        [(ngModel)]="appointment.gender"
        #gender="ngModel"
      >
        <option value="Male">Male</option>
        <option value="Female">Female</option>
        <option value="Others">Others</option>
      </select>
    </div>

    <!-- Problem -->
    <div class="form-group">
      <label for="problem">
        Patient's Problem :
        <b class="text-danger">*</b>
      </label>

      <input
        type="text"
        id="problem"
        class="form-control"
        name="problem"
        [(ngModel)]="appointment.problem"
        required
        #problem="ngModel"
        [class.is-invalid]="problem.invalid && problem.touched"
      />

      <small
        class="text-danger"
        [class.d-none]="problem.valid || problem.untouched"
      >
        required field
      </small>
    </div>

    <!-- Submit -->
    <button
      style="margin-top: 15px"
      [disabled]="bookappointmentform.form.invalid"
      type="submit"
      class="btn registerbtn"
    >
      <i class="fa fa-plus"></i>
      Book Your Appointment
    </button>
  </form>
</div>

<br /><br />

<app-footer></app-footer>
