<app-header></app-header>

<div class="heading">
  <h1>Your Prescription</h1>
</div>

<!-- Search Card -->
<div class="message" id="messagecard">
  <form #tempform="ngForm" (ngSubmit)="searchPrescription()">
    <div class="form-group">
      <label>
        Patient Name :
        <b class="text-danger">*</b>
      </label>

      <input
        type="text"
        class="form-control"
        placeholder="Enter patient name"
        name="patientname"
        [(ngModel)]="name"
        required
        #patientname="ngModel"
        [class.is-invalid]="patientname.invalid && patientname.touched"
      />

      <small
        class="text-danger"
        [class.d-none]="patientname.valid || patientname.untouched"
      >
        Required field
      </small>
    </div>

    <button
      type="submit"
      [disabled]="tempform.form.invalid"
      class="registerbtn"
    >
      Search Prescription
    </button>
  </form>
</div>

<!-- Prescription Pages -->
<div *ngFor="let patient of prescriptionlist | async" id="prescriptionpages">
  <button id="printbtn" (click)="onPrint()" class="print-btn">Print</button>

  <div class="prescription-card">
    <!-- Header -->
    <div class="header-flag">
      <div class="header-left">
        <h3>Healthcare Management System</h3>
        <h5>[developed by Tabish Firoz]</h5>
      </div>

      <!-- Patient Image -->
      <div class="header-right">
        <img
          *ngIf="patient.gender === 'Male' || patient.gender === 'male'"
          class="user-img"
          src="assets/img/maleuser.png"
          alt="Male Patient"
        />

        <img
          *ngIf="patient.gender === 'Female' || patient.gender === 'female'"
          class="user-img"
          src="assets/img/femaleuser.png"
          alt="Female Patient"
        />
      </div>
    </div>

    <!-- Body -->
    <div class="prescription-body">
      <hr />

      <div class="doctor-name">Dr. {{ patient.doctorname }} MBBS, MS, PhD</div>

      <div class="info-row">
        <div>
          PatientID :
          <span class="highlight">{{ patient.patientid }}</span>
        </div>

        <div>
          Date :
          <span class="highlight">{{ patient.date }}</span>
        </div>
      </div>

      <div class="info-row">
        <div>
          Age :
          <span class="highlight">{{ patient.age }}</span>
        </div>
      </div>

      <hr />

      <div class="data-row">
        Patient Name :
        <span>{{ patient.patientname }}</span>
      </div>

      <div class="data-row">
        Gender :
        <span>{{ patient.gender }}</span>
      </div>

      <div class="data-row">
        Disease :
        <span>{{ patient.disease }}</span>
      </div>

      <div class="data-row">
        Prescription :
        <span>{{ patient.prescription }}</span>
      </div>

      <!-- Admission Status -->
      <div class="data-row">
        Admission Status :

        <span
          *ngIf="patient.admissionstatus === 'false'"
          class="status pending"
        >
          Admission Pending
        </span>

        <span
          *ngIf="patient.admissionstatus === 'accept'"
          class="status accepted"
        >
          Admitted
        </span>

        <span
          *ngIf="patient.admissionstatus === 'reject'"
          class="status rejected"
        >
          Rejected
        </span>
      </div>

      <div class="footer-message">
        Follow prescriptions properly. Get Well Soon!
      </div>
    </div>

    <!-- Footer -->
    <div class="footer-flag">
      <div>Phone : 9698382306 / 8610254674</div>

      <div>Email : mdtabishfiroz04@gmail.com</div>
    </div>
  </div>
</div>

<app-footer></app-footer>
