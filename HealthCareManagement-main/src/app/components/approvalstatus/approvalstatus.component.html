<app-header></app-header>

<!-- SEARCH -->
<div class="message" id="messagecard">
  <form #tempform="ngForm" (ngSubmit)="searchPatient()">

    <div class="form-group">
      <label>
        Patient Email Address:
        <b class="text-danger">*</b>
      </label>

      <input
        type="text"
        class="form-control"
        placeholder="enter patient email"
        name="patientname"
        [(ngModel)]="mail"
        required
        #patientname="ngModel"
      />

      <small
        class="text-danger"
        *ngIf="patientname.invalid && patientname.touched"
      >
        required field
      </small>

    </div>

    <button
      class="registerbtn"
      [disabled]="tempform.form.invalid"
      type="submit"
    >
      search Prescription
    </button>

  </form>
</div>


<!-- DOCTOR APPROVAL -->
<div class="panel panel-primary" id="doctorapproval">

  <div class="panel-heading">
    <h2>Your approval status</h2>

    <div *ngFor="let doctor of approval | async">

      <div *ngIf="doctor.status === 'accept'">
        <small style="color: green">(Verified & Accepted)</small>
      </div>

      <div *ngIf="doctor.status === 'false'">
        <small style="color: orange">(Not yet Verified)</small>
      </div>

      <div *ngIf="doctor.status === 'reject'">
        <small style="color: red">(Verified & Rejected)</small>
      </div>

    </div>

  </div>


  <div class="panel-body">

    <table>

      <thead>
        <tr>
          <th>Identity</th>
          <th>Name</th>
          <th>Email</th>
          <th>Gender</th>
          <th>Experience</th>
          <th>Specialization</th>
          <th>Worked at</th>
          <th>Mobile</th>
          <th>Status</th>
        </tr>
      </thead>


      <tbody>

        <tr *ngFor="let doctor of approval | async">

          <!-- FIXED TD -->
          <td>
            <img
              [src]="
                doctor.gender &&
                doctor.gender.toLowerCase().trim() === 'female'
                  ? 'assets/img/femaledoctor.png'
                  : 'assets/img/maledoctor.png'
              "
              class="doc-img"
              alt="Doctor Image"
            />
          </td>


          <td>{{ doctor.doctorname }}</td>

          <td>{{ doctor.email }}</td>

          <td>{{ doctor.gender }}</td>

          <td>{{ doctor.experience }} years</td>

          <td>{{ doctor.specialization }}</td>

          <td>{{ doctor.previoushospital }}</td>

          <td>{{ doctor.mobile }}</td>


          <td>

            <div
              *ngIf="
                currRole === 'doctor' ||
                (currRole === 'DOCTOR' && doctor.email === loggedUser)
              "
            >

              <div
                *ngIf="doctor.status === 'accept'"
                class="accepted"
              >
                Accepted
              </div>

              <div
                *ngIf="doctor.status === 'false'"
                class="pending"
              >
                Pending
              </div>

              <div
                *ngIf="doctor.status === 'reject'"
                class="rejected"
              >
                Rejected
              </div>

            </div>

          </td>

        </tr>

      </tbody>

    </table>

  </div>

</div>



<!-- PATIENT APPROVAL -->
<div class="panel panel-primary" id="patientapproval">

  <div class="panel-heading">
    <h2>Your approval status</h2>
  </div>


  <div class="panel-body">

    <table>

      <thead>
        <tr>
          <th>Identity</th>
          <th>Patient ID</th>
          <th>Name</th>
          <th>Age</th>
          <th>Slot</th>
          <th>Date</th>
          <th>Problem</th>
          <th>Approval</th>
          <th>Admission</th>
        </tr>
      </thead>


      <tbody>

        <tr *ngFor="let patient of appointment | async">

          <!-- FIXED TD -->
          <td>
            <img
              [src]="
                patient.gender &&
                patient.gender.toLowerCase().trim() === 'female'
                  ? 'assets/img/femaleuser.png'
                  : 'assets/img/maleuser.png'
              "
              class="doc-img"
              alt="Patient Image"
            />
          </td>


          <td>
            <div class="date-cover">
              {{ patient.patientid }}
            </div>
          </td>


          <td>{{ patient.patientname }}</td>

          <td>{{ patient.age }}</td>


          <td>
            <div class="slotcover">
              {{ patient.slot }}
            </div>
          </td>


          <td>
            <div class="date-cover">
              {{ patient.date }}
            </div>
          </td>


          <td>{{ patient.problem }}</td>


          <td>

            <div
              *ngIf="
                currRole === 'user' ||
                (currRole === 'USER' && patient.email === loggedUser)
              "
            >

              <div
                *ngIf="patient.appointmentstatus === 'accept'"
                class="accepted"
              >
                Accepted
              </div>

              <div
                *ngIf="patient.appointmentstatus === 'false'"
                class="pending"
              >
                Pending
              </div>

              <div
                *ngIf="patient.appointmentstatus === 'reject'"
                class="rejected"
              >
                Rejected
              </div>

            </div>

          </td>


          <td>

            <div
              *ngIf="patient.admissionstatus === 'accept'"
              class="accepted"
            >
              Admitted
            </div>

            <div
              *ngIf="patient.admissionstatus === 'false'"
              class="pending"
            >
              Pending
            </div>

            <div
              *ngIf="patient.admissionstatus === 'reject'"
              class="rejected"
            >
              Not Admitted
            </div>

          </td>

        </tr>

      </tbody>

    </table>

  </div>

</div>


<app-footer></app-footer>
